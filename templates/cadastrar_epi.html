{% extends 'base.html' %}

{% block title %}
Cadastrar EPI
{% endblock %}

{% block content %}
<section class="form-section">
    <h1>
        Cadastrar Novo EPI
    </h1>
    <form method="POST" action="/cadastro_epi">
        <div class="form-group">
            <label for="nome">
                Nome:
            </label>
            <input type="text" id="nome" name="nome" required>
        </div>
        <div class="form-group">
            <label for="ca">
                Número do CA (Certificado de Aprovação):
            </label>
            <input type="text" id="ca" name="ca">
        </div>
        <div class="form-group">
            <label for="descricao">
                Descrição:
            </label>
            <textarea id="descricao" name="descricao" rows="4" required class="descricao-epi"></textarea>
        </div>
        <div class="form-group">
            <label for="fabricante">
                Fabricante:
            </label>
            <input type="text" id="fabricante" name="fabricante">
        </div>
        <div class="form-group">
            <label for="data_validade">
                Data de Validade:
            </label>
            <input type="date" id="data_validade" name="data_validade">
        </div>
        <div class="form-group">
            <label for="controlar_periodicidade">
                Controlar Periodicidade:
            </label>
            <select id="controlar_periodicidade" name="controlar_periodicidade"
                onchange="togglePeriodicidadeTroca()">
                <option value="Nao" selected>
                    Não
                </option>
                <option value="Sim">
                    Sim
                </option>
            </select>
        </div>
        <div class="form-group" id="div_periodicidade_troca">
            <label for="periodicidade_troca">
                Periodicidade de Troca (dias):
            </label>
            <input type="number" id="periodicidade_troca" name="periodicidade_troca">
        </div>
        <div class="form-group">
            <label for="quantidade_estoque">
                Quantidade em Estoque:
            </label>
            <input type="number" id="quantidade_estoque" name="quantidade_estoque" value="0" required>
        </div>
        <div class="form-group">
            <label for="estoque_minimo">
                Estoque Mínimo:
            </label>
            <input type="number" id="estoque_minimo" name="estoque_minimo" value="0" required>
        </div>
        <button type="submit" class="form-button">
            Cadastrar
        </button>
    </form>

    <p>
        <a href="/epis">
            Voltar para Gerenciamento de EPIs
        </a>
    </p>

    <script>
        function togglePeriodicidadeTroca() {
            var controlarPeriodicidadeSelect = document.getElementById("controlar_periodicidade");
            var divPeriodicidadeTroca = document.getElementById("div_periodicidade_troca");

            if (controlarPeriodicidadeSelect.value === "Sim") {
                divPeriodicidadeTroca.style.display = "block";
            } else {
                divPeriodicidadeTroca.style.display = "none";
            }
        }

        // Executar a função inicialmente para definir o estado inicial
        togglePeriodicidadeTroca();
    </script>
</section>
{% endblock %}